{"version":3,"file":"users-store-OjMRM6-M.js","sources":["../../../../stores/users-store.js"],"sourcesContent":["import { baseUrl } from '~/constants';\r\n\r\nexport const useUsersStore = defineStore('Users', () => {\r\n\tconst users = ref([]);\r\n\tconst usersDropdown = ref([]);\r\n\tconst currentUser = ref({});\r\n\r\n\tconst getUsers = async () => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst { data } = await useFetch(baseUrl + '/auth/account', {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tusers.value = data.value.data;\r\n\r\n\t\tif (data.value.data.length)\r\n\t\t\tusersDropdown.value = users.value.map((acc) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: `${acc['display_name']}`,\r\n\t\t\t\t\tvalue: `${acc['id']}`,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\telse usersDropdown.value = [];\r\n\t};\r\n\r\n\tconst addNewUser = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/account`, {\r\n\t\t\tmethod: 'post',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t\tbody: data,\r\n\t\t});\r\n\r\n\t\tawait getUsers();\r\n\t\treturn response;\r\n\t};\r\n\r\n\tconst editUser = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/account/${data['id']}`, {\r\n\t\t\tmethod: 'put',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t\tbody: data,\r\n\t\t});\r\n\r\n\t\tawait getUsers();\r\n\t\treturn response;\r\n\t};\r\n\r\n\tconst deleteUser = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/account/${data['id']}`, {\r\n\t\t\tmethod: 'delete',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tawait getUsers();\r\n\t\treturn response;\r\n\t};\r\n\r\n\treturn {\r\n\t\tusers,\r\n\t\tusersDropdown,\r\n\t\tcurrentUser,\r\n\t\tgetUsers,\r\n\t\taddNewUser,\r\n\t\teditUser,\r\n\t\tdeleteUser,\r\n\t};\r\n});\r\n"],"names":[],"mappings":";;;;;;;;AAEY,MAAC,gBAAgB,YAAY,SAAS,MAAM;AACvD,QAAM,QAAQ,IAAI,CAAA,CAAE;AACpB,QAAM,gBAAgB,IAAI,CAAA,CAAE;AAC5B,QAAM,cAAc,IAAI,CAAA,CAAE;AAE1B,QAAM,WAAW,YAAY;AAC5B,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,EAAE,KAAM,IAAG,MAAM,SAAS,UAAU,iBAAiB;AAAA,MAC1D,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,IACF,GAAA,aAAC;AAED,UAAM,QAAQ,KAAK,MAAM;AAEzB,QAAI,KAAK,MAAM,KAAK;AACnB,oBAAc,QAAQ,MAAM,MAAM,IAAI,CAAC,QAAQ;AAC9C,eAAO;AAAA,UACN,MAAM,GAAG,IAAI,cAAc,CAAC;AAAA,UAC5B,OAAO,GAAG,IAAI,IAAI,CAAC;AAAA,QACxB;AAAA,MACA,CAAI;AAAA,QACG,eAAc,QAAQ;EAC7B;AAEC,QAAM,aAAa,OAAO,SAAS;AAClC,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM,OAAO,UAAU,iBAAiB;AAAA,MACxD,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,MACD,MAAM;AAAA,IACT,CAAG;AAED,UAAM,SAAQ;AACd,WAAO;AAAA,EACT;AAEC,QAAM,WAAW,OAAO,SAAS;AAChC,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM,OAAO,UAAU,iBAAiB,KAAK,IAAI,CAAC,IAAI;AAAA,MACtE,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,MACD,MAAM;AAAA,IACT,CAAG;AAED,UAAM,SAAQ;AACd,WAAO;AAAA,EACT;AAEC,QAAM,aAAa,OAAO,SAAS;AAClC,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM,OAAO,UAAU,iBAAiB,KAAK,IAAI,CAAC,IAAI;AAAA,MACtE,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,IACJ,CAAG;AAED,UAAM,SAAQ;AACd,WAAO;AAAA,EACT;AAEC,SAAO;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACA,CAAC;"}