{"version":3,"file":"payment-method-store-B-s5UmN8.js","sources":["../../../../stores/payment-method-store.js"],"sourcesContent":["import { baseUrl } from '~/constants';\r\n\r\nexport const usePaymentMethodsStore = defineStore('PaymentMethods', () => {\r\n\tconst paymentMethods = ref([]);\r\n\tconst paymentMethodsDropdown = ref([]);\r\n\tconst currentPaymentMethod = ref({});\r\n\r\n\tconst getPaymentMethods = async () => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst { currentProjectID } = storeToRefs(useProjectsStore());\r\n\r\n\t\tconst { data } = await useFetch(baseUrl + '/auth/paymentMethod', {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tpaymentMethods.value = data.value.data.filter(\r\n\t\t\t(payment) => payment['project_id'] == currentProjectID.value\r\n\t\t);\r\n\r\n\t\tif (data.value.data.length)\r\n\t\t\tpaymentMethodsDropdown.value = paymentMethods.value.map((payment) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: `${payment['method_name']}`,\r\n\t\t\t\t\tvalue: `${payment['id']}`,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\telse paymentMethodsDropdown.value = [];\r\n\t};\r\n\r\n\tconst addNewPaymentMethod = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/paymentMethod`, {\r\n\t\t\tmethod: 'post',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t\tbody: data,\r\n\t\t});\r\n\r\n\t\tawait getPaymentMethods();\r\n\t\treturn response;\r\n\t};\r\n\r\n\tconst editPaymentMethod = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(\r\n\t\t\tbaseUrl + `/auth/paymentMethod/${data['id']}`,\r\n\t\t\t{\r\n\t\t\t\tmethod: 'put',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t\t},\r\n\t\t\t\tbody: data,\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tawait getPaymentMethods();\r\n\t\treturn response;\r\n\t};\r\n\r\n\tconst deletePaymentMethod = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(\r\n\t\t\tbaseUrl + `/auth/paymentMethod/${data['id']}`,\r\n\t\t\t{\r\n\t\t\t\tmethod: 'delete',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tawait getPaymentMethods();\r\n\t\treturn response;\r\n\t};\r\n\r\n\treturn {\r\n\t\tpaymentMethods,\r\n\t\tpaymentMethodsDropdown,\r\n\t\tcurrentPaymentMethod,\r\n\t\tgetPaymentMethods,\r\n\t\taddNewPaymentMethod,\r\n\t\teditPaymentMethod,\r\n\t\tdeletePaymentMethod,\r\n\t};\r\n});\r\n"],"names":[],"mappings":";;;;;;;;;AAEY,MAAC,yBAAyB,YAAY,kBAAkB,MAAM;AACzE,QAAM,iBAAiB,IAAI,CAAA,CAAE;AAC7B,QAAM,yBAAyB,IAAI,CAAA,CAAE;AACrC,QAAM,uBAAuB,IAAI,CAAA,CAAE;AAEnC,QAAM,oBAAoB,YAAY;AACrC,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,EAAE,iBAAkB,IAAG,YAAY,iBAAkB,CAAA;AAE3D,UAAM,EAAE,KAAM,IAAG,MAAM,SAAS,UAAU,uBAAuB;AAAA,MAChE,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,IACF,GAAA,aAAC;AAED,mBAAe,QAAQ,KAAK,MAAM,KAAK;AAAA,MACtC,CAAC,YAAY,QAAQ,YAAY,KAAK,iBAAiB;AAAA,IAC1D;AAEE,QAAI,KAAK,MAAM,KAAK;AACnB,6BAAuB,QAAQ,eAAe,MAAM,IAAI,CAAC,YAAY;AACpE,eAAO;AAAA,UACN,MAAM,GAAG,QAAQ,aAAa,CAAC;AAAA,UAC/B,OAAO,GAAG,QAAQ,IAAI,CAAC;AAAA,QAC5B;AAAA,MACA,CAAI;AAAA,QACG,wBAAuB,QAAQ;EACtC;AAEC,QAAM,sBAAsB,OAAO,SAAS;AAC3C,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM,OAAO,UAAU,uBAAuB;AAAA,MAC9D,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,MACD,MAAM;AAAA,IACT,CAAG;AAED,UAAM,kBAAiB;AACvB,WAAO;AAAA,EACT;AAEC,QAAM,oBAAoB,OAAO,SAAS;AACzC,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM;AAAA,MACtB,UAAU,uBAAuB,KAAK,IAAI,CAAC;AAAA,MAC3C;AAAA,QACC,QAAQ;AAAA,QACR,SAAS;AAAA,UACR,gBAAgB;AAAA,UAChB,cAAc,YAAY;AAAA,QAC1B;AAAA,QACD,MAAM;AAAA,MACN;AAAA,IACJ;AAEE,UAAM,kBAAiB;AACvB,WAAO;AAAA,EACT;AAEC,QAAM,sBAAsB,OAAO,SAAS;AAC3C,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM;AAAA,MACtB,UAAU,uBAAuB,KAAK,IAAI,CAAC;AAAA,MAC3C;AAAA,QACC,QAAQ;AAAA,QACR,SAAS;AAAA,UACR,gBAAgB;AAAA,UAChB,cAAc,YAAY;AAAA,QAC1B;AAAA,MACD;AAAA,IACJ;AAEE,UAAM,kBAAiB;AACvB,WAAO;AAAA,EACT;AAEC,SAAO;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACA,CAAC;"}