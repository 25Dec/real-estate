{"version":3,"file":"index-BJ0za_8e.js","sources":["../../../../pages/admin/notifications/index.vue"],"sourcesContent":["<script setup>\r\n\timport { FilterMatchMode } from 'primevue/api';\r\n\r\n\tconst { notifications, currentNotification } = storeToRefs(\r\n\t\tuseNotificationsStore()\r\n\t);\r\n\tconst { getNotifications } = useNotificationsStore();\r\n\tconst { projects, projectsDropdown } = storeToRefs(useProjectsStore());\r\n\tconst { getProjects } = useProjectsStore();\r\n\r\n\tawait getNotifications();\r\n\tawait getProjects();\r\n\r\n\tconst user = ref({});\r\n\r\n\tif (process.client) {\r\n\t\tuser.value = JSON.parse(localStorage.getItem('user')) ?? {};\r\n\t}\r\n\r\n\tconst userPermissionForActions =\r\n\t\tuser.value['type'] == 'admin' ||\r\n\t\tuser.value['type'] == 'super_admin' ||\r\n\t\tuser.value['type'] == 'sale_manager'\r\n\t\t\t? true\r\n\t\t\t: false;\r\n\r\n\tconst currentProject = ref({\r\n\t\tname: projectsDropdown.value[0]?.name ?? '',\r\n\t\tvalue: projectsDropdown.value[0]?.value ?? '',\r\n\t});\r\n\tconst myNotificationsBaseOnProjectID = computed(() => {\r\n\t\treturn notifications.value.filter((noti) => {\r\n\t\t\treturn noti['project_id'] == currentProject.value.value;\r\n\t\t});\r\n\t});\r\n\tconst statuses = ref([{ name: 'Info', value: 'info' }]);\r\n\tconst filters = ref({\r\n\t\tglobal: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n\t});\r\n\tconst viewDetailsNotificationDialogVisible = ref(false);\r\n\tconst createNotificationDialogVisible = ref(false);\r\n\tconst editNotificationDialogVisible = ref(false);\r\n\tconst deleteNotificationDialogVisible = ref(false);\r\n\r\n\tconst handleDropdown = (event) => {\r\n\t\tmyNotificationsBaseOnProjectID.value = notifications.value.filter(\r\n\t\t\t(noti) => {\r\n\t\t\t\treturn noti['project_id'] == event.value;\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\tconst toggleViewDetailsNotification = async (data) => {\r\n\t\tcurrentNotification.value = data;\r\n\t\tviewDetailsNotificationDialogVisible.value =\r\n\t\t\t!viewDetailsNotificationDialogVisible.value;\r\n\t};\r\n\tconst toggleEditNotification = async (data) => {\r\n\t\tcurrentNotification.value = data;\r\n\t\teditNotificationDialogVisible.value = !editNotificationDialogVisible.value;\r\n\t};\r\n\tconst toggleDeleteNotification = async (data) => {\r\n\t\tcurrentNotification.value = data;\r\n\t\tdeleteNotificationDialogVisible.value =\r\n\t\t\t!deleteNotificationDialogVisible.value;\r\n\t};\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"w-full h-full flex flex-col\">\r\n\t\t<div\r\n\t\t\tclass=\"fixed right-0 top-0 z-50 backdrop-blur-xl w-5/6 h-[8%] px-4 border-b flex justify-between items-center\"\r\n\t\t>\r\n\t\t\t<div class=\"flex items-center gap-2\">\r\n\t\t\t\t<span class=\"font-semibold text-lg\">Notifications</span>\r\n\t\t\t\t<Tag :value=\"myNotificationsBaseOnProjectID.length\"></Tag>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"flex items-center gap-2\">\r\n\t\t\t\t<IconField iconPosition=\"left\">\r\n\t\t\t\t\t<InputIcon class=\"flex items-center\">\r\n\t\t\t\t\t\t<Icon name=\"mdi:filter-outline\" />\r\n\t\t\t\t\t</InputIcon>\r\n\t\t\t\t\t<InputText\r\n\t\t\t\t\t\tv-model=\"filters['global'].value\"\r\n\t\t\t\t\t\tplaceholder=\"Filter Notification...\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</IconField>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tv-if=\"userPermissionForActions\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tlabel=\"New\"\r\n\t\t\t\t\t@click=\"\r\n\t\t\t\t\t\tcreateNotificationDialogVisible = !createNotificationDialogVisible\r\n\t\t\t\t\t\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div\r\n\t\t\tclass=\"fixed right-0 top-[8%] z-50 backdrop-blur-xl w-5/6 h-[8%] px-4 border-b flex justify-between items-center\"\r\n\t\t>\r\n\t\t\t<div class=\"flex items-center gap-2\">\r\n\t\t\t\t<label\r\n\t\t\t\t\tfor=\"currentProject\"\r\n\t\t\t\t\tclass=\"font-semibold text-lg\"\r\n\t\t\t\t\t>Current Project:\r\n\t\t\t\t</label>\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\tid=\"currentProject\"\r\n\t\t\t\t\tplaceholder=\"Select Project\"\r\n\t\t\t\t\tv-model=\"currentProject.value\"\r\n\t\t\t\t\t:options=\"projectsDropdown\"\r\n\t\t\t\t\toptionLabel=\"name\"\r\n\t\t\t\t\toptionValue=\"value\"\r\n\t\t\t\t\t@change=\"(event) => handleDropdown(event)\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"absolute top-[16%] w-full h-[92%]\">\r\n\t\t\t<DataTable\r\n\t\t\t\t:value=\"myNotificationsBaseOnProjectID\"\r\n\t\t\t\tv-model:filters=\"filters\"\r\n\t\t\t\t:paginator=\"true\"\r\n\t\t\t\t:rows=\"50\"\r\n\t\t\t\t:rowsPerPageOptions=\"[5, 10, 20, 50]\"\r\n\t\t\t\tscrollable\r\n\t\t\t\tscrollHeight=\"flex\"\r\n\t\t\t\tremovableSort\r\n\t\t\t\tv-auto-animate\r\n\t\t\t>\r\n\t\t\t\t<template #empty>\r\n\t\t\t\t\t<div class=\"flex justify-center items-center\">\r\n\t\t\t\t\t\t<span>No Notifications Found.</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\r\n\t\t\t\t<Column\r\n\t\t\t\t\tfield=\"title\"\r\n\t\t\t\t\theader=\"Title\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #body=\"{ data }\">\r\n\t\t\t\t\t\t<div class=\"flex items-center gap-3\">\r\n\t\t\t\t\t\t\t{{ data['title'] }}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</Column>\r\n\r\n\t\t\t\t<Column\r\n\t\t\t\t\tfield=\"status\"\r\n\t\t\t\t\theader=\"Status\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #body=\"{ data }\">\r\n\t\t\t\t\t\t{{ capitalize(data['status']) }}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</Column>\r\n\r\n\t\t\t\t<Column header=\"Actions\">\r\n\t\t\t\t\t<template #body=\"{ data }\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tseverity=\"secondary\"\r\n\t\t\t\t\t\t\t@click=\"toggleViewDetailsNotification(data)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon name=\"mdi:eye-outline\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tv-if=\"userPermissionForActions\"\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tseverity=\"secondary\"\r\n\t\t\t\t\t\t\t@click=\"toggleEditNotification(data)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon name=\"mdi:edit-outline\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tv-if=\"userPermissionForActions\"\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tseverity=\"danger\"\r\n\t\t\t\t\t\t\t@click=\"toggleDeleteNotification(data)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon name=\"mdi:delete-outline\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</Column>\r\n\t\t\t</DataTable>\r\n\t\t</div>\r\n\t</div>\r\n\t<ViewDetailsNotificationDialog\r\n\t\tv-if=\"viewDetailsNotificationDialogVisible\"\r\n\t\t:visible=\"viewDetailsNotificationDialogVisible\"\r\n\t\t:statuses=\"statuses\"\r\n\t/>\r\n\t<CreateNotificationDialog\r\n\t\tv-if=\"createNotificationDialogVisible\"\r\n\t\t:visible=\"createNotificationDialogVisible\"\r\n\t\t:statuses=\"statuses\"\r\n\t/>\r\n\t<EditNotificationDialog\r\n\t\tv-if=\"editNotificationDialogVisible\"\r\n\t\t:visible=\"editNotificationDialogVisible\"\r\n\t\t:statuses=\"statuses\"\r\n\t/>\r\n\t<DeleteNotificationDialog\r\n\t\tv-if=\"deleteNotificationDialogVisible\"\r\n\t\t:visible=\"deleteNotificationDialogVisible\"\r\n\t/>\r\n</template>\r\n"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGO,UAAA,EAAE,eAAe,oBAAA,IAAwB;AAAA,MAC9C,sBAAsB;AAAA,IAAA;AAEjB,UAAA,EAAE,qBAAqB;AAC7B,UAAM,EAAE,UAAU,iBAAA,IAAqB,YAAY,iBAAkB,CAAA;AAC/D,UAAA,EAAE,gBAAgB;AAExB,KAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,iBAAA,CAAiB;AACjB,KAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,YAAA,CAAY;AAEZ,UAAA,OAAO,IAAI,CAAA,CAAE;AAMnB,UAAM,2BACL,KAAK,MAAM,MAAM,KAAK,WACtB,KAAK,MAAM,MAAM,KAAK,iBACtB,KAAK,MAAM,MAAM,KAAK,iBACnB,OACA;AAEJ,UAAM,iBAAiB,IAAI;AAAA,MAC1B,QAAM,sBAAiB,MAAM,CAAC,MAAxB,mBAA2B,SAAQ;AAAA,MACzC,SAAO,sBAAiB,MAAM,CAAC,MAAxB,mBAA2B,UAAS;AAAA,IAAA,CAC3C;AACK,UAAA,iCAAiC,SAAS,MAAM;AACrD,aAAO,cAAc,MAAM,OAAO,CAAC,SAAS;AAC3C,eAAO,KAAK,YAAY,KAAK,eAAe,MAAM;AAAA,MAAA,CAClD;AAAA,IAAA,CACD;AACK,UAAA,WAAW,IAAI,CAAC,EAAE,MAAM,QAAQ,OAAO,OAAQ,CAAA,CAAC;AACtD,UAAM,UAAU,IAAI;AAAA,MACnB,QAAQ,EAAE,OAAO,MAAM,WAAW,gBAAgB,SAAS;AAAA,IAAA,CAC3D;AACK,UAAA,uCAAuC,IAAI,KAAK;AAChD,UAAA,kCAAkC,IAAI,KAAK;AAC3C,UAAA,gCAAgC,IAAI,KAAK;AACzC,UAAA,kCAAkC,IAAI,KAAK;AAE3C,UAAA,iBAAiB,CAAC,UAAU;AACF,qCAAA,QAAQ,cAAc,MAAM;AAAA,QAC1D,CAAC,SAAS;AACF,iBAAA,KAAK,YAAY,KAAK,MAAM;AAAA,QACpC;AAAA,MAAA;AAAA,IACD;AAEK,UAAA,gCAAgC,OAAO,SAAS;AACrD,0BAAoB,QAAQ;AACS,2CAAA,QACpC,CAAC,qCAAqC;AAAA,IAAA;AAElC,UAAA,yBAAyB,OAAO,SAAS;AAC9C,0BAAoB,QAAQ;AACE,oCAAA,QAAQ,CAAC,8BAA8B;AAAA,IAAA;AAEhE,UAAA,2BAA2B,OAAO,SAAS;AAChD,0BAAoB,QAAQ;AACI,sCAAA,QAC/B,CAAC,gCAAgC;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}