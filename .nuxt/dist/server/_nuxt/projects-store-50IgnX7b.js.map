{"version":3,"file":"projects-store-50IgnX7b.js","sources":["../../../../stores/projects-store.js"],"sourcesContent":["import { baseUrl } from '~/constants';\r\n\r\nexport const useProjectsStore = defineStore('Projects', () => {\r\n\tconst projects = ref([]);\r\n\tconst currentProject = ref({});\r\n\tconst currentProjectID = ref(0);\r\n\tconst projectsDropdown = ref([]);\r\n\r\n\tconst setCurrentProject = (data) => {\r\n\t\tcurrentProject.value = data;\r\n\t\tif (process.client) {\r\n\t\t\tlocalStorage.setItem('currentProject', JSON.stringify(data));\r\n\t\t}\r\n\t};\r\n\r\n\tconst setCurrentProjectID = (id) => {\r\n\t\tcurrentProjectID.value = id;\r\n\t\tif (process.client) {\r\n\t\t\tlocalStorage.setItem('currentProjectID', id);\r\n\t\t}\r\n\t};\r\n\r\n\tconst currentProjectFromLocalStore = computed(() => {\r\n\t\tif (process.client && localStorage.getItem('currentProject')) {\r\n\t\t\tcurrentProject.value = JSON.parse(localStorage.getItem('currentProject'));\r\n\t\t\treturn currentProject.value;\r\n\t\t}\r\n\t\treturn {};\r\n\t});\r\n\r\n\tconst currentProjectIDFromLocalStore = computed(() => {\r\n\t\tif (process.client && localStorage.getItem('currentProjectID')) {\r\n\t\t\tcurrentProjectID.value = JSON.parse(\r\n\t\t\t\tlocalStorage.getItem('currentProjectID')\r\n\t\t\t);\r\n\t\t\treturn currentProjectID.value;\r\n\t\t}\r\n\t\treturn 0;\r\n\t});\r\n\r\n\tconst allProjectIDs = computed(async () => {\r\n\t\tawait getProjects();\r\n\t\treturn projects.value.map((project) => {\r\n\t\t\treturn { name: `${project.id}`, value: project.id };\r\n\t\t});\r\n\t});\r\n\r\n\tconst getProjects = async () => {\r\n\t\tconst { data } = await useFetch(baseUrl + '/project', {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tprojects.value = data.value.data.data.filter(\r\n\t\t\t(project) => project['deleted'] == 'false'\r\n\t\t);\r\n\r\n\t\tif (projects.value.length)\r\n\t\t\tprojectsDropdown.value = projects.value.map((project) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: `${project['name']}`,\r\n\t\t\t\t\tvalue: `${project['id']}`,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\telse projectsDropdown.value = [];\r\n\t};\r\n\r\n\tconst addNewProject = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/project`, {\r\n\t\t\tmethod: 'post',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken,\r\n\t\t\t},\r\n\t\t\tbody: data,\r\n\t\t});\r\n\r\n\t\tawait getProjects();\r\n\t\treturn response;\r\n\t};\r\n\r\n\tconst editProject = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/project/${data['id']}`, {\r\n\t\t\tmethod: 'put',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t\tbody: data,\r\n\t\t});\r\n\r\n\t\tawait getProjects();\r\n\t\treturn response;\r\n\t};\r\n\r\n\tconst deleteProject = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/project/${data['id']}`, {\r\n\t\t\tmethod: 'delete',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tawait getProjects();\r\n\t\treturn response;\r\n\t};\r\n\r\n\treturn {\r\n\t\tallProjectIDs,\r\n\t\tprojects,\r\n\t\tcurrentProject,\r\n\t\tcurrentProjectID,\r\n\t\tprojectsDropdown,\r\n\t\tcurrentProjectFromLocalStore,\r\n\t\tcurrentProjectIDFromLocalStore,\r\n\t\tgetProjects,\r\n\t\taddNewProject,\r\n\t\teditProject,\r\n\t\tdeleteProject,\r\n\t\tsetCurrentProjectID,\r\n\t\tsetCurrentProject,\r\n\t};\r\n});\r\n"],"names":[],"mappings":";;;;;;;;AAEa,MAAA,mBAAmB,YAAY,YAAY,MAAM;AACvD,QAAA,WAAW,IAAI,CAAA,CAAE;AACjB,QAAA,iBAAiB,IAAI,CAAA,CAAE;AACvB,QAAA,mBAAmB,IAAI,CAAC;AACxB,QAAA,mBAAmB,IAAI,CAAA,CAAE;AAEzB,QAAA,oBAAoB,CAAC,SAAS;AACnC,mBAAe,QAAQ;AAAA,EAGvB;AAGK,QAAA,sBAAsB,CAAC,OAAO;AACnC,qBAAiB,QAAQ;AAAA,EAGzB;AAGK,QAAA,+BAA+B,SAAS,MAAM;AAKnD,WAAO;EAAC,CACR;AAEK,QAAA,iCAAiC,SAAS,MAAM;AAO9C,WAAA;AAAA,EAAA,CACP;AAEK,QAAA,gBAAgB,SAAS,YAAY;AAC1C,UAAM,YAAY;AAClB,WAAO,SAAS,MAAM,IAAI,CAAC,YAAY;AAC/B,aAAA,EAAE,MAAM,GAAG,QAAQ,EAAE,IAAI,OAAO,QAAQ;IAAG,CAClD;AAAA,EAAA,CACD;AAED,QAAM,cAAc,YAAY;AAC/B,UAAM,EAAE,KAAK,IAAI,MAAM,SAAS,UAAU,YAAY;AAAA,MACrD,SAAS;AAAA,QACR,gBAAgB;AAAA,MACjB;AAAA,IACD,GAAA,aAAC;AAED,aAAS,QAAQ,KAAK,MAAM,KAAK,KAAK;AAAA,MACrC,CAAC,YAAY,QAAQ,SAAS,KAAK;AAAA,IAAA;AAGpC,QAAI,SAAS,MAAM;AAClB,uBAAiB,QAAQ,SAAS,MAAM,IAAI,CAAC,YAAY;AACjD,eAAA;AAAA,UACN,MAAM,GAAG,QAAQ,MAAM,CAAC;AAAA,UACxB,OAAO,GAAG,QAAQ,IAAI,CAAC;AAAA,QAAA;AAAA,MACxB,CACA;AAAA,QACG,kBAAiB,QAAQ;EAAC;AAG1B,QAAA,gBAAgB,OAAO,SAAS;AAC/B,UAAA,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM,OAAO,UAAU,iBAAiB;AAAA,MACxD,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc;AAAA,MACf;AAAA,MACA,MAAM;AAAA,IAAA,CACN;AAED,UAAM,YAAY;AACX,WAAA;AAAA,EAAA;AAGF,QAAA,cAAc,OAAO,SAAS;AAC7B,UAAA,cAAc,UAAU,OAAO;AAC/B,UAAA,WAAW,MAAM,OAAO,UAAU,iBAAiB,KAAK,IAAI,CAAC,IAAI;AAAA,MACtE,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC3B;AAAA,MACA,MAAM;AAAA,IAAA,CACN;AAED,UAAM,YAAY;AACX,WAAA;AAAA,EAAA;AAGF,QAAA,gBAAgB,OAAO,SAAS;AAC/B,UAAA,cAAc,UAAU,OAAO;AAC/B,UAAA,WAAW,MAAM,OAAO,UAAU,iBAAiB,KAAK,IAAI,CAAC,IAAI;AAAA,MACtE,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC3B;AAAA,IAAA,CACA;AAED,UAAM,YAAY;AACX,WAAA;AAAA,EAAA;AAGD,SAAA;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEF,CAAC;"}