{"version":3,"file":"customers-store-DoxVOnyQ.js","sources":["../../../../stores/customers-store.js"],"sourcesContent":["import { baseUrl } from '~/constants';\r\n\r\nexport const useCustomersStore = defineStore('Customers', () => {\r\n\tconst customers = ref([]);\r\n\tconst customersDropdown = ref([]);\r\n\tconst currentCustomer = ref({});\r\n\r\n\tconst getCustomers = async () => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst { data } = await useFetch(baseUrl + '/auth/customer', {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tcustomers.value = data.value.data;\r\n\r\n\t\tif (data.value.data.length)\r\n\t\t\tcustomersDropdown.value = customers.value.map((acc) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: `${acc['display_name']}`,\r\n\t\t\t\t\tvalue: `${acc['id']}`,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\telse customersDropdown.value = [];\r\n\t};\r\n\r\n\tconst addNewCustomer = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/customer`, {\r\n\t\t\tmethod: 'post',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t\tbody: data,\r\n\t\t});\r\n\r\n\t\tawait getCustomers();\r\n\t\treturn response;\r\n\t};\r\n\r\n\tconst editCustomer = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/customer/${data['id']}`, {\r\n\t\t\tmethod: 'put',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t\tbody: data,\r\n\t\t});\r\n\r\n\t\tawait getCustomers();\r\n\t\treturn response;\r\n\t};\r\n\r\n\tconst deleteCustomer = async (data) => {\r\n\t\tconst accessToken = useCookie('token');\r\n\t\tconst response = await $fetch(baseUrl + `/auth/customer/${data['id']}`, {\r\n\t\t\tmethod: 'delete',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\taccess_token: accessToken.value,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tawait getCustomers();\r\n\t\treturn response;\r\n\t};\r\n\r\n\treturn {\r\n\t\tcustomers,\r\n\t\tcustomersDropdown,\r\n\t\tcurrentCustomer,\r\n\t\tgetCustomers,\r\n\t\taddNewCustomer,\r\n\t\teditCustomer,\r\n\t\tdeleteCustomer,\r\n\t};\r\n});\r\n"],"names":[],"mappings":";;;;;;;;AAEY,MAAC,oBAAoB,YAAY,aAAa,MAAM;AAC/D,QAAM,YAAY,IAAI,CAAA,CAAE;AACxB,QAAM,oBAAoB,IAAI,CAAA,CAAE;AAChC,QAAM,kBAAkB,IAAI,CAAA,CAAE;AAE9B,QAAM,eAAe,YAAY;AAChC,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,EAAE,KAAM,IAAG,MAAM,SAAS,UAAU,kBAAkB;AAAA,MAC3D,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,IACF,GAAA,aAAC;AAED,cAAU,QAAQ,KAAK,MAAM;AAE7B,QAAI,KAAK,MAAM,KAAK;AACnB,wBAAkB,QAAQ,UAAU,MAAM,IAAI,CAAC,QAAQ;AACtD,eAAO;AAAA,UACN,MAAM,GAAG,IAAI,cAAc,CAAC;AAAA,UAC5B,OAAO,GAAG,IAAI,IAAI,CAAC;AAAA,QACxB;AAAA,MACA,CAAI;AAAA,QACG,mBAAkB,QAAQ;EACjC;AAEC,QAAM,iBAAiB,OAAO,SAAS;AACtC,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM,OAAO,UAAU,kBAAkB;AAAA,MACzD,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,MACD,MAAM;AAAA,IACT,CAAG;AAED,UAAM,aAAY;AAClB,WAAO;AAAA,EACT;AAEC,QAAM,eAAe,OAAO,SAAS;AACpC,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM,OAAO,UAAU,kBAAkB,KAAK,IAAI,CAAC,IAAI;AAAA,MACvE,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,MACD,MAAM;AAAA,IACT,CAAG;AAED,UAAM,aAAY;AAClB,WAAO;AAAA,EACT;AAEC,QAAM,iBAAiB,OAAO,SAAS;AACtC,UAAM,cAAc,UAAU,OAAO;AACrC,UAAM,WAAW,MAAM,OAAO,UAAU,kBAAkB,KAAK,IAAI,CAAC,IAAI;AAAA,MACvE,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,cAAc,YAAY;AAAA,MAC1B;AAAA,IACJ,CAAG;AAED,UAAM,aAAY;AAClB,WAAO;AAAA,EACT;AAEC,SAAO;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACA,CAAC;"}