{"version":3,"file":"index-CVgKnsW6.js","sources":["../../../../pages/project_details/floor/index.vue"],"sourcesContent":["<script setup>\r\n\timport { FilterMatchMode } from 'primevue/api';\r\n\r\n\tconst { zones } = storeToRefs(useZonesStore());\r\n\tconst { getZones } = useZonesStore();\r\n\tconst { blocks } = storeToRefs(useBlocksStore());\r\n\tconst { getBlocks } = useBlocksStore();\r\n\tconst { floors, currentFloor } = storeToRefs(useFloorsStore());\r\n\tconst { getFloors } = useFloorsStore();\r\n\r\n\tawait getZones();\r\n\tawait getBlocks();\r\n\tawait getFloors();\r\n\r\n\tzones.value = zones.value.map((zone) => {\r\n\t\treturn { id: zone.id, name: `${zone.name}`, value: `${zone.id}` };\r\n\t});\r\n\tconst myZones = ref(zones.value);\r\n\tconst currentZone = ref({\r\n\t\tname: myZones.value[0]?.name ?? '',\r\n\t\tvalue: myZones.value[0]?.value ?? '',\r\n\t});\r\n\r\n\tblocks.value = blocks.value.map((block) => {\r\n\t\treturn {\r\n\t\t\tid: block['id'],\r\n\t\t\tname: `${block['desc']}`,\r\n\t\t\tvalue: `${block['id']}`,\r\n\t\t\tzone_id: `${block['zone_id']}`,\r\n\t\t};\r\n\t});\r\n\tconst myBlocks = ref(\r\n\t\tblocks.value.filter((block) => block['zone_id'] == currentZone.value.value)\r\n\t);\r\n\tconst currentBlock = ref({\r\n\t\tname:\r\n\t\t\tmyBlocks.value.filter(\r\n\t\t\t\t(block) => block['zone_id'] == currentZone.value.value\r\n\t\t\t)?.[0]?.name ?? '',\r\n\t\tvalue:\r\n\t\t\tmyBlocks.value.filter(\r\n\t\t\t\t(block) => block['zone_id'] == currentZone.value.value\r\n\t\t\t)?.[0]?.value ?? '',\r\n\t});\r\n\tconst myFloorsBaseOnZoneAndBlockID = computed(() => {\r\n\t\treturn floors.value.filter(\r\n\t\t\t(floor) => floor['block_id'] == currentBlock.value.value\r\n\t\t);\r\n\t});\r\n\r\n\tconst filters = ref({\r\n\t\tglobal: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n\t});\r\n\tconst menu = ref();\r\n\tconst menuItems = ref([\r\n\t\t{\r\n\t\t\tlabel: 'Move to High Area',\r\n\t\t\tcommand: () => {},\r\n\t\t},\r\n\t]);\r\n\tconst viewDetailsFloorDialogVisible = ref(false);\r\n\tconst createFloorDialogVisible = ref(false);\r\n\tconst editFloorDialogVisible = ref(false);\r\n\tconst deleteFloorDialogVisible = ref(false);\r\n\r\n\tconst handleDropdown = (event, type) => {\r\n\t\tif (type == 'zone') {\r\n\t\t\tmyBlocks.value = blocks.value.filter(\r\n\t\t\t\t(block) => block['zone_id'] == event.value\r\n\t\t\t);\r\n\t\t\tcurrentBlock.value = {\r\n\t\t\t\tname:\r\n\t\t\t\t\tmyBlocks.value.filter(\r\n\t\t\t\t\t\t(block) => block['zone_id'] == currentZone.value.value\r\n\t\t\t\t\t)?.[0]?.name ?? '',\r\n\t\t\t\tvalue:\r\n\t\t\t\t\tmyBlocks.value.filter(\r\n\t\t\t\t\t\t(block) => block['zone_id'] == currentZone.value.value\r\n\t\t\t\t\t)?.[0]?.value ?? '',\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\tconst toggleViewDetailsFloor = (data) => {\r\n\t\tcurrentFloor.value = data;\r\n\t\tviewDetailsFloorDialogVisible.value = !viewDetailsFloorDialogVisible.value;\r\n\t};\r\n\tconst toggleEditFloor = (data) => {\r\n\t\tcurrentFloor.value = data;\r\n\t\teditFloorDialogVisible.value = !editFloorDialogVisible.value;\r\n\t};\r\n\tconst toggleDeleteFloor = async (data) => {\r\n\t\tcurrentFloor.value = data;\r\n\t\tdeleteFloorDialogVisible.value = !deleteFloorDialogVisible.value;\r\n\t};\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"w-full h-full flex flex-col\">\r\n\t\t<div\r\n\t\t\tclass=\"fixed right-0 top-0 z-50 backdrop-blur-xl w-5/6 h-[8%] px-4 border-b flex justify-between items-center\"\r\n\t\t>\r\n\t\t\t<div class=\"flex items-center gap-2\">\r\n\t\t\t\t<span class=\"font-semibold text-lg\">Floor</span>\r\n\t\t\t\t<Tag :value=\"myFloorsBaseOnZoneAndBlockID.length\"></Tag>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"flex items-center gap-2\">\r\n\t\t\t\t<IconField iconPosition=\"left\">\r\n\t\t\t\t\t<InputIcon class=\"flex items-center\">\r\n\t\t\t\t\t\t<Icon name=\"mdi:filter-outline\" />\r\n\t\t\t\t\t</InputIcon>\r\n\t\t\t\t\t<InputText\r\n\t\t\t\t\t\tv-model=\"filters['global'].value\"\r\n\t\t\t\t\t\tplaceholder=\"Filter floor...\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</IconField>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tlabel=\"New\"\r\n\t\t\t\t\t@click=\"createFloorDialogVisible = !createFloorDialogVisible\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div\r\n\t\t\tclass=\"fixed right-0 top-[8%] z-50 backdrop-blur-xl w-5/6 h-[8%] px-4 border-b flex items-center gap-3\"\r\n\t\t>\r\n\t\t\t<div class=\"flex items-center gap-2\">\r\n\t\t\t\t<label\r\n\t\t\t\t\tfor=\"currentZone\"\r\n\t\t\t\t\tclass=\"font-semibold text-lg\"\r\n\t\t\t\t\t>Current Zone:\r\n\t\t\t\t</label>\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\tid=\"currentZone\"\r\n\t\t\t\t\tplaceholder=\"Select zone\"\r\n\t\t\t\t\tv-model=\"currentZone.value\"\r\n\t\t\t\t\t:options=\"myZones\"\r\n\t\t\t\t\toptionLabel=\"name\"\r\n\t\t\t\t\toptionValue=\"value\"\r\n\t\t\t\t\t@change=\"(event) => handleDropdown(event, 'zone')\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"flex items-center gap-2\">\r\n\t\t\t\t<label\r\n\t\t\t\t\tfor=\"currentZone\"\r\n\t\t\t\t\tclass=\"font-semibold text-lg\"\r\n\t\t\t\t\t>Current Block:\r\n\t\t\t\t</label>\r\n\t\t\t\t<Dropdown\r\n\t\t\t\t\tid=\"currentBlock\"\r\n\t\t\t\t\tplaceholder=\"Select block\"\r\n\t\t\t\t\tv-model=\"currentBlock.value\"\r\n\t\t\t\t\t:options=\"myBlocks\"\r\n\t\t\t\t\toptionLabel=\"name\"\r\n\t\t\t\t\toptionValue=\"value\"\r\n\t\t\t\t\t@change=\"(event) => handleDropdown(event, 'block')\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"absolute top-[16%] w-full h-[92%]\">\r\n\t\t\t<DataTable\r\n\t\t\t\t:value=\"myFloorsBaseOnZoneAndBlockID\"\r\n\t\t\t\tv-model:filters=\"filters\"\r\n\t\t\t\t:paginator=\"true\"\r\n\t\t\t\t:rows=\"50\"\r\n\t\t\t\t:rowsPerPageOptions=\"[5, 10, 20, 50]\"\r\n\t\t\t\tscrollable\r\n\t\t\t\tscrollHeight=\"flex\"\r\n\t\t\t\tremovableSort\r\n\t\t\t\tv-auto-animate\r\n\t\t\t>\r\n\t\t\t\t<template #empty>\r\n\t\t\t\t\t<div class=\"flex justify-center items-center\">\r\n\t\t\t\t\t\t<span>No floor found.</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\r\n\t\t\t\t<Column\r\n\t\t\t\t\tfield=\"desc\"\r\n\t\t\t\t\theader=\"Name\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #body=\"{ data }\">\r\n\t\t\t\t\t\t{{ data['desc'] }}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</Column>\r\n\r\n\t\t\t\t<Column\r\n\t\t\t\t\tfield=\"total_area\"\r\n\t\t\t\t\theader=\"Total Area\"\r\n\t\t\t\t\t:sortable=\"true\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #body=\"{ data }\">\r\n\t\t\t\t\t\t{{ data['total_area'] }}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</Column>\r\n\r\n\t\t\t\t<Column\r\n\t\t\t\t\tfield=\"progress\"\r\n\t\t\t\t\theader=\"Progress\"\r\n\t\t\t\t\tsortable\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #body=\"{ data }\">\r\n\t\t\t\t\t\t<Knob\r\n\t\t\t\t\t\t\tv-model=\"data['progress']\"\r\n\t\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\t\t:size=\"50\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</Column>\r\n\r\n\t\t\t\t<Column header=\"Actions\">\r\n\t\t\t\t\t<template #body=\"{ data }\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tseverity=\"secondary\"\r\n\t\t\t\t\t\t\t@click=\"toggleViewDetailsFloor(data)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon name=\"mdi:eye-outline\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tseverity=\"secondary\"\r\n\t\t\t\t\t\t\t@click=\"toggleEditFloor(data)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon name=\"mdi:edit-outline\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tseverity=\"danger\"\r\n\t\t\t\t\t\t\t@click=\"toggleDeleteFloor(data)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon name=\"mdi:delete-outline\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tseverity=\"secondary\"\r\n\t\t\t\t\t\t\t@click=\"(event) => menu.toggle(event)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Icon name=\"mdi:more-vert\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\tref=\"menu\"\r\n\t\t\t\t\t\t\t:model=\"menuItems\"\r\n\t\t\t\t\t\t\t:popup=\"true\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</Column>\r\n\t\t\t</DataTable>\r\n\t\t</div>\r\n\t</div>\r\n\t<ViewDetailsFloorDialog\r\n\t\tv-if=\"viewDetailsFloorDialogVisible\"\r\n\t\t:visible=\"viewDetailsFloorDialogVisible\"\r\n\t/>\r\n\t<CreateFloorDialog\r\n\t\tv-if=\"createFloorDialogVisible\"\r\n\t\t:visible=\"createFloorDialogVisible\"\r\n\t/>\r\n\t<EditFloorDialog\r\n\t\tv-if=\"editFloorDialogVisible\"\r\n\t\t:visible=\"editFloorDialogVisible\"\r\n\t/>\r\n\t<DeleteFloorDialog\r\n\t\tv-if=\"deleteFloorDialogVisible\"\r\n\t\t:visible=\"deleteFloorDialogVisible\"\r\n\t/>\r\n</template>\r\n"],"names":["_withAsyncContext","_b","_a","_d","_c"],"mappings":"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"}